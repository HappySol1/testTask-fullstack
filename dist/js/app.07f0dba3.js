(function(){"use strict";var e={3407:function(e,t,s){var a=s(9242),n=s(3396);const r={class:"container"};function o(e,t,s,a,o,l){const i=(0,n.up)("user"),c=(0,n.up)("chat");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(i),(0,n.Wm)(c)])}const l=e=>((0,n.dD)("data-v-7e48ec0c"),e=e(),(0,n.Cn)(),e),i={class:"login-form"},c=l((()=>(0,n._)("label",{for:"login",class:"login-form__label"},"Введите логин",-1)));function u(e,t,s,r,o,l){return(0,n.wg)(),(0,n.iD)("div",i,[c,(0,n.wy)((0,n._)("input",{id:"login","onUpdate:modelValue":t[0]||(t[0]=e=>o.name=e),class:"login-form__input",onBlur:t[1]||(t[1]=(...e)=>l.updateStore&&l.updateStore(...e)),onKeyup:t[2]||(t[2]=(0,a.D2)(((...e)=>l.blur&&l.blur(...e)),["enter"])),type:"text"},null,544),[[a.nr,o.name]])])}var d=s(65),g={data(){return{name:""}},methods:{...(0,d.nv)({setName:"setName"}),blur(e){e.target.blur()},updateStore(){localStorage.setItem("name",this.name),this.setName(this.name)}},mounted(){let e=localStorage.getItem("name");e&&(this.name=e,this.setName(e))}},m=s(89);const v=(0,m.Z)(g,[["render",u],["__scopeId","data-v-7e48ec0c"]]);var _=v,h=s(7139);const p=e=>((0,n.dD)("data-v-29393536"),e=e(),(0,n.Cn)(),e),f={class:"chat"},b={key:0,class:"chat__loader"},w=p((()=>(0,n._)("div",{class:"lds-dual-ring"},null,-1))),y=[w],k=p((()=>(0,n._)("div",{class:"chat__header"},null,-1))),q={class:"chat__history",ref:"scrollableBlock"},R={class:"message__sender"},P={class:"message__wrap"},x=["onClick"],O={class:"message__text"},D=p((()=>(0,n._)("div",{class:"message__like-button"},null,-1))),M={class:"message__time"},A={class:"chat__message"},C={class:"chat__message-wrap"},I=p((()=>(0,n._)("img",{src:"Arrow.svg"},null,-1))),N=[I];function j(e,t,s,r,o,l){return(0,n.wg)(),(0,n.iD)("div",f,[e.getIsRequest?((0,n.wg)(),(0,n.iD)("div",b,y)):(0,n.kq)("",!0),k,(0,n._)("div",q,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.messeges,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"message",key:t.id},[(0,n._)("div",R,(0,h.zw)(t.username),1),(0,n._)("div",P,[(0,n._)("div",{class:"message__delete",onClick:s=>e.deletePost(t.id)},null,8,x),(0,n._)("div",O,(0,h.zw)(t.text),1),D,(0,n._)("div",M,(0,h.zw)(t.created_at),1)])])))),128))],512),(0,n._)("div",A,[(0,n._)("div",C,[(0,n.wy)((0,n._)("input",{class:"chat__message-input",onKeyup:t[0]||(t[0]=(0,a.D2)(((...e)=>l.sendmassage&&l.sendmassage(...e)),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),type:"text"},null,544),[[a.nr,o.value]]),(0,n._)("div",{class:"chat__message-sendbtn",onClick:t[2]||(t[2]=(...e)=>l.sendmassage&&l.sendmassage(...e))},N)])])])}var S={data(){return{value:""}},methods:{...(0,d.nv)({addMessage:"addMessage",getPosts:"getPosts",deletePost:"deletePost"}),sendmassage(e){console.log(e),this.value&&(this.addMessage(this.value),this.value="",e.target.blur())}},computed:{...(0,d.Se)({messeges:"getMessagesArr",getIsRequest:"getIsRequest"}),name(){return this.data}},mounted(){this.getPosts()},watch:{messeges(){this.$nextTick((()=>{const e=this.$refs.scrollableBlock,t=e.scrollHeight;e.scrollTop=t}))}}};const T=(0,m.Z)(S,[["render",j],["__scopeId","data-v-29393536"]]);var z=T,Z={name:"App",components:{user:_,chat:z}};const B=(0,m.Z)(Z,[["render",o]]);var K=B,U=s(4161);const H=U.Z.create({baseURL:"http://dzpages.ru/api/",headers:{"Content-Type":"text/plain"}});var V=H;const W=()=>V.get("/get_all_posts"),$=e=>V.post("/create_post",e),E=e=>V["delete"]("/delete_post",{params:{id:e}});var F=(0,d.MT)({state:{isRequest:!1,messagesArr:[],name:""},getters:{getIsRequest(e){return e.isRequest},getMessagesArr(e){return e.messagesArr}},mutations:{setName(e,t){e.name=t},toggleisRequest(e,t){e.isRequest=t},addMessage(e,t){e.messagesArr=[...e.messagesArr,t]},addPosts(e,t){e.messagesArr=t}},actions:{setName({commit:e},t){e("setName",t)},addMessage({commit:e,state:t},s){e("toggleisRequest",!0),$({text:s,username:t.name?t.name:"Аноним"}).then((t=>{e("addMessage",t.data),e("toggleisRequest",!1)})).catch((e=>{console.log(e)}))},getPosts({commit:e}){e("toggleisRequest",!0),W().then((t=>{e("addPosts",t.data),e("toggleisRequest",!1)})).catch((e=>{console.log(e)}))},deletePost({commit:e,dispatch:t},s){console.log(s),e("toggleisRequest",!0),E(s).then((e=>{t("getPosts")})).catch((e=>{console.log(e)}))}}});(0,a.ri)(K).use(F).mount("#app")}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,a,n,r){if(!a){var o=1/0;for(u=0;u<e.length;u++){a=e[u][0],n=e[u][1],r=e[u][2];for(var l=!0,i=0;i<a.length;i++)(!1&r||o>=r)&&Object.keys(s.O).every((function(e){return s.O[e](a[i])}))?a.splice(i--,1):(l=!1,r<o&&(o=r));if(l){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,n,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,r,o=a[0],l=a[1],i=a[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(n in l)s.o(l,n)&&(s.m[n]=l[n]);if(i)var u=i(s)}for(t&&t(a);c<o.length;c++)r=o[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},a=self["webpackChunktesttask"]=self["webpackChunktesttask"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(3407)}));a=s.O(a)})();
//# sourceMappingURL=app.07f0dba3.js.map